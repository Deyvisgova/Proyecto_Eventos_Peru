<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520" role="img" aria-labelledby="title desc">
  <title id="title">Arquitectura por capas</title>
  <desc id="desc">Ilustración de una arquitectura de software en capas con flujos de entrada, negocio y persistencia.</desc>
  <defs>
    <linearGradient id="layerGradient" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#eaf3ff" />
      <stop offset="100%" stop-color="#d4e4ff" />
    </linearGradient>
    <style>
      .layer { fill: url(#layerGradient); stroke: #1b4f72; stroke-width: 2px; rx: 16; ry: 16; }
      .title { font: 700 20px 'Inter', 'Segoe UI', sans-serif; fill: #1b2938; }
      .label { font: 600 16px 'Inter', 'Segoe UI', sans-serif; fill: #0f6abf; }
      .text { font: 14px 'Inter', 'Segoe UI', sans-serif; fill: #1b2938; }
      .note { font: 13px 'Inter', 'Segoe UI', sans-serif; fill: #4a5568; }
      .connector { stroke: #0f6abf; stroke-width: 2px; marker-end: url(#arrow); }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L9,3 L0,6 Z" fill="#0f6abf" />
    </marker>
  </defs>

  <rect x="20" y="20" width="860" height="480" fill="#fdfefe" stroke="#d4dde6" stroke-width="2" rx="20" ry="20" />
  <text x="40" y="60" class="title">Arquitectura por capas para la plataforma de eventos</text>
  <text x="40" y="85" class="note">Cada capa tiene responsabilidades explícitas, lo que facilita pruebas, escalabilidad y mantenimiento.</text>

  <!-- Capa de presentación -->
  <rect x="70" y="120" width="760" height="80" class="layer" />
  <text x="90" y="155" class="label">Capa de Presentación</text>
  <text x="90" y="178" class="text">Angular, componentes, validación de formularios, i18n, rutas públicas y privadas.</text>
  <text x="740" y="155" class="note">Entradas del usuario</text>

  <!-- Capa de aplicación -->
  <rect x="70" y="220" width="760" height="80" class="layer" />
  <text x="90" y="255" class="label">Capa de Aplicación / Servicios</text>
  <text x="90" y="278" class="text">Casos de uso, orquestación de comandos, DTOs, manejo de transacciones.</text>
  <text x="680" y="255" class="note">Reglas de orquestación</text>

  <!-- Capa de dominio -->
  <rect x="70" y="320" width="760" height="80" class="layer" />
  <text x="90" y="355" class="label">Capa de Dominio</text>
  <text x="90" y="378" class="text">Entidades, agregados, servicios de dominio, eventos de dominio, invariantes.</text>
  <text x="720" y="355" class="note">Invariantes y lógica central</text>

  <!-- Capa de infraestructura -->
  <rect x="70" y="420" width="760" height="60" class="layer" />
  <text x="90" y="455" class="label">Capa de Infraestructura</text>
  <text x="90" y="478" class="text">Persistencia (JPA), colas, gateways externos, logging y observabilidad.</text>

  <!-- Conectores verticales -->
  <line x1="450" y1="200" x2="450" y2="220" class="connector" />
  <line x1="450" y1="300" x2="450" y2="320" class="connector" />
  <line x1="450" y1="400" x2="450" y2="420" class="connector" />

  <!-- Flujos horizontales -->
  <polyline points="70,120 40,120 40,480 70,480" fill="none" stroke="#7b8794" stroke-dasharray="6,6" stroke-width="2" />
  <text x="22" y="300" transform="rotate(-90 22 300)" class="note">Solicitud → Respuesta</text>
</svg>
