<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520" role="img" aria-labelledby="title desc">
  <title id="title">Implementación de patrones de diseño</title>
  <desc id="desc">Diagrama conceptual que muestra cómo diferentes patrones de diseño colaboran en una arquitectura de servicios.</desc>
  <defs>
    <linearGradient id="panelGradient" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#f5f7fa" />
      <stop offset="100%" stop-color="#e1e8f0" />
    </linearGradient>
    <style>
      .panel { fill: url(#panelGradient); stroke: #2c3e50; stroke-width: 2px; rx: 12; ry: 12; }
      .title { font: 700 20px 'Inter', 'Segoe UI', sans-serif; fill: #1b2938; }
      .text { font: 14px 'Inter', 'Segoe UI', sans-serif; fill: #1b2938; }
      .label { font: 600 15px 'Inter', 'Segoe UI', sans-serif; fill: #0f6abf; }
      .note { font: italic 13px 'Inter', 'Segoe UI', sans-serif; fill: #4a5568; }
      .connector { stroke: #0f6abf; stroke-width: 2px; marker-end: url(#arrow); }
      .dot { fill: #0f6abf; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L9,3 L0,6 Z" fill="#0f6abf" />
    </marker>
  </defs>

  <rect x="20" y="20" width="860" height="480" fill="#fdfefe" stroke="#d4dde6" stroke-width="2" rx="20" ry="20" />
  <text x="40" y="60" class="title">Implementación de patrones para servicios de eventos</text>
  <text x="40" y="85" class="note">Los patrones trabajan juntos para mantener el código desacoplado, extensible y probado.</text>

  <!-- Sección de creación -->
  <rect x="40" y="110" width="260" height="150" class="panel" />
  <text x="60" y="140" class="label">Creación</text>
  <text x="60" y="165" class="text">Factory Method</text>
  <text x="60" y="190" class="text">• Crea servicios concretos</text>
  <text x="60" y="215" class="text">• Centraliza validaciones</text>
  <text x="60" y="240" class="text">• Facilita tests con dobles</text>
  <circle cx="300" cy="185" r="6" class="dot" />

  <!-- Sección de comportamiento -->
  <rect x="320" y="110" width="260" height="150" class="panel" />
  <text x="340" y="140" class="label">Comportamiento</text>
  <text x="340" y="165" class="text">Strategy</text>
  <text x="340" y="190" class="text">• Multiplica las políticas de cobro</text>
  <text x="340" y="215" class="text">• Permite cambiar reglas en runtime</text>
  <text x="340" y="240" class="text">• Reduce condicionales anidadas</text>
  <circle cx="580" cy="185" r="6" class="dot" />

  <!-- Sección de comunicación -->
  <rect x="600" y="110" width="260" height="150" class="panel" />
  <text x="620" y="140" class="label">Comunicación</text>
  <text x="620" y="165" class="text">Observer + Mediator</text>
  <text x="620" y="190" class="text">• Notifica cambios de estado</text>
  <text x="620" y="215" class="text">• Coordina múltiples módulos</text>
  <text x="620" y="240" class="text">• Desacopla emisores y oyentes</text>
  <circle cx="860" cy="185" r="6" class="dot" />

  <!-- Conectores superiores -->
  <line x1="306" y1="185" x2="320" y2="185" class="connector" />
  <line x1="586" y1="185" x2="600" y2="185" class="connector" />

  <!-- Sección central -->
  <rect x="180" y="290" width="540" height="180" class="panel" />
  <text x="200" y="320" class="label">Integración en la aplicación</text>
  <text x="200" y="345" class="text">1. El <tspan font-weight="700">Factory Method</tspan> prepara instancias de servicio con dependencias inyectadas.</text>
  <text x="200" y="370" class="text">2. Cada servicio delega la lógica variable a una <tspan font-weight="700">Strategy</tspan> seleccionada por configuración.</text>
  <text x="200" y="395" class="text">3. Los cambios relevantes se propagan a módulos externos mediante <tspan font-weight="700">Observer</tspan>.</text>
  <text x="200" y="420" class="text">4. Un <tspan font-weight="700">Mediator</tspan> centraliza la coordinación para evitar referencias cruzadas.</text>

  <!-- Conectores hacia el bloque central -->
  <line x1="170" y1="235" x2="230" y2="290" class="connector" />
  <line x1="450" y1="235" x2="450" y2="290" class="connector" />
  <line x1="730" y1="235" x2="650" y2="290" class="connector" />
</svg>
